---
// Types
import type Article from "types/Article";
import type Project from "types/Project";
import type Talk from "types/Talk";
import type SEO from "types/SEO";

// Components
import dayjs from "dayjs";
import { Image } from "@astrojs/image/components";
import BaseLayout from "../layouts/BaseLayout.astro";
import Newsletter from "@components/Newsletter.astro";

// Assets
import HeroImage from "@images/danferg.webp";
import WaveIcon from "@images/wave.png";
import ConceptToProduction from "@images/talks/concept-to-production.webp";
import NoCode from "@images/danferg.webp";
import SwinLead from "@images/talks/swinlead.webp";

// Data
const SEO: SEO = {
  title: "Your friendly neighbourhood social entrepreneur | Dan Ferg",
  description:
    "A solutions architect and software developer with an understanding of holistic design; seeking to create digitally enabled change for good.",
  imageUrl: "/assets/snow.jpg",
  openGraph: {
    type: "website",
  },
  canonicalUrl: "/",
};

const navigation = [
  { name: "Projects", href: "/projects" },
  { name: "Talks", href: "#talks" },
  { name: "Articles", href: "/articles" },
  { name: "Newsletters", href: "/newsletters" },
];

const projects = await Astro.glob<Project>("./projects/*.md");
const featuredProjects = projects.filter(
  (project) => project.frontmatter.featured
);

const articles = await Astro.glob<Article>("./articles/*.md");
const sortedArticles = articles.sort(function (a, b) {
  return (
    new Date(b.frontmatter.date).getTime() -
    new Date(a.frontmatter.date).getTime()
  );
});

const talks: Array<Talk> = [
  {
    title: "Building a business in an hour... with no code!",
    imageUrl: NoCode,
    category: "Entrepreneurship",
    link: "#",
    date: "2022-08-18",
    description:
      "I was invited by the Swinburne Entreprenuership Club to discus how no-code tools can enable non-tech savy entrepreneurs to build digital-facing businesses.",
    slidesUrl: "/assets/slides/no-code.zip",
  },
  {
    title: "Concept to Production",
    imageUrl: ConceptToProduction,
    category: "Entrepreneurship",
    link: "https://www.youtube.com/watch?v=_SZP7QmIIfE",
    date: "2022-05-03",
    description:
      "I gave a talk on my process of creating startups, from concept to production. Here, we looked at the 5 crucial steps to successfully and quickly creating a startup.",
    slidesUrl: "/assets/slides/concept-to-production.zip",
  },
  {
    title: "SwinLead Leadership Workshop",
    imageUrl: SwinLead,
    category: "Leadership",
    link: "https://www.youtube.com/watch?v=7_aJAvfGNsY",
    date: "2022-04-13",
    description:
      "A number of the original SwinLead leadership team members came together to discuss our experiences, challenges and successes. We then ran workshops in small groups to answer questions and give guidance.",
  },
];
---

<BaseLayout {...SEO}>
  <main>
    <!-- Section: Hero -->
    <div class="relative overflow-hidden bg-white">
      <div class="mx-auto max-w-7xl">
        <div
          class="relative z-10 bg-white pb-8 sm:pb-16 md:pb-20 lg:w-full lg:max-w-2xl lg:pb-28 xl:pb-32"
        >
          <svg
            class="absolute inset-y-0 right-0 hidden h-full w-48 translate-x-1/2 transform text-white lg:block"
            fill="currentColor"
            viewBox="0 0 100 100"
            preserveAspectRatio="none"
            aria-hidden="true"
          >
            <polygon points="50,0 100,0 50,100 0,100"></polygon>
          </svg>

          <div class="relative px-4 pt-6 sm:px-6 lg:px-8">
            <nav
              class="relative flex items-center justify-between sm:h-10 lg:justify-start"
              aria-label="Global"
            >
              <div
                class="flex flex-shrink-0 flex-grow items-center lg:flex-grow-0"
              >
                <div class="flex w-full items-center justify-between md:w-auto">
                  <a href="#">
                    <span class="sr-only">Dan Ferg</span>
                    <Image
                      alt="Dan Ferg"
                      class="h-8 w-auto sm:h-10"
                      src={WaveIcon}
                      format="webp"
                    />
                  </a>
                </div>
              </div>
              <div class="hidden md:ml-10 md:block md:space-x-10 md:pr-4">
                {
                  navigation.map((item) => (
                    <a
                      href={item.href}
                      class="font-medium text-gray-500 hover:text-gray-900"
                    >
                      {item.name}
                    </a>
                  ))
                }
                <a
                  href="/contact"
                  class="font-medium text-indigo-600 hover:text-indigo-500"
                >
                  Hire me!
                </a>
              </div>
            </nav>
          </div>

          <div
            class="mx-auto mt-10 max-w-7xl px-4 sm:mt-12 sm:px-6 md:mt-16 lg:mt-20 lg:px-8 xl:mt-28"
          >
            <div class="sm:text-center lg:text-left">
              <h1
                class="text-4xl font-bold tracking-tight text-gray-900 sm:text-5xl md:text-6xl"
              >
                <span class="block xl:inline">Your friendly neighbourhood</span
                >{" "}
                <span class="block text-indigo-600 xl:inline">entrepreneur</span
                >
              </h1>
              <p
                class="mt-3 text-base text-gray-700 sm:mx-auto sm:mt-5 sm:max-w-xl sm:text-lg md:mt-5 md:text-xl lg:mx-0"
              >
                A solutions architect and software developer with an
                understanding of holistic design; seeking to create digitally
                enabled change for good.
              </p>
              <!-- Call To Action Buttons -->
              <!-- <div
								class="mt-5 sm:mt-8 sm:flex sm:justify-center lg:justify-start"
							>
								<div class="rounded-md shadow">
									<a
										href="#"
										class="flex w-full items-center justify-center rounded-md border border-transparent bg-indigo-600 px-8 py-3 text-base font-medium text-white hover:bg-indigo-700 md:py-4 md:px-10 md:text-lg"
									>
										Get started
									</a>
								</div>
								<div class="mt-3 sm:mt-0 sm:ml-3">
									<a
										href="#"
										class="flex w-full items-center justify-center rounded-md border border-transparent bg-indigo-100 px-8 py-3 text-base font-medium text-indigo-700 hover:bg-indigo-200 md:py-4 md:px-10 md:text-lg"
									>
										Live demo
									</a>
								</div>
							</div> -->
            </div>
          </div>
        </div>
      </div>
      <div class="lg:absolute lg:inset-y-0 lg:right-0 lg:w-1/2">
        <Image
          class="h-56 w-full object-cover sm:h-72 md:h-96 lg:h-full lg:w-full"
          src={HeroImage}
          alt="Hero image"
          format="webp"
        />
      </div>
    </div>

    <!-- Section: Newsletter CTA -->
    <Newsletter />

    <!-- TODO Section: 12 Startups in 12 Months -->

    <!-- Section: Projects -->
    <div
      id="projects"
      class="mx-auto max-w-7xl pt-16 pb-12 px-4 sm:px-6 lg:py-16 lg:px-8"
    >
      <div class="lg:grid lg:grid-cols-2 lg:items-center lg:gap-8">
        <div>
          <h2
            class="text-3xl font-bold tracking-tight text-gray-900 sm:text-4xl"
          >
            Projects
          </h2>
          <p class="mt-3 max-w-3xl text-lg text-gray-500">
            From my work on the digital-first charity focusing on creating tools
            for preperations, duration and restoration in natural disasters, to
            creating innovative methods for valuing land which considers the the
            agricultural value to surrounding areas; there's never a challenge I
            won't take on.
          </p>
          <div class="mt-8 sm:flex">
            <div class="rounded-md shadow">
              <a
                href="/projects"
                class="flex items-center justify-center rounded-md border border-transparent bg-indigo-600 px-5 py-3 text-base font-medium text-white hover:bg-indigo-700"
              >
                View all projects
              </a>
            </div>
            <div class="mt-3 sm:mt-0 sm:ml-3">
              <a
                href="/contact"
                class="flex items-center justify-center rounded-md border border-transparent px-5 py-3 text-base font-medium text-indigo-600 hover:bg-indigo-100"
              >
                Hire me
              </a>
            </div>
          </div>
        </div>
        <div
          class="mt-8 grid md:grid-cols-2 gap-0.5 md:grid-cols-3 lg:mt-0 lg:grid-cols-2"
        >
          {
            featuredProjects.map((project) => (
              <a
                href={project.url}
                class="col-span-1 flex justify-center bg-gray-50 py-8 px-8"
              >
                <img
                  class="max-h-10"
                  src={project.frontmatter.iconUrl}
                  alt={project.frontmatter.title}
                />
              </a>
            ))
          }
        </div>
      </div>
    </div>

    <!-- Section: Articles -->
    <div id="articles" class="bg-white px-4 pt-16 pb-12 sm:px-6 lg:px-8">
      <div class="relative mx-auto divide-y-2 divide-gray-200 lg:max-w-7xl">
        <div>
          <h2
            class="text-3xl font-bold tracking-tight text-gray-900 sm:text-4xl"
          >
            Articles
          </h2>
          <div
            class="mt-3 sm:mt-4 lg:grid lg:grid-cols-2 lg:items-center lg:gap-5"
          >
            <p class="text-lg text-gray-500">
              From life ramblings, to lessons learned from burnout, to technical
              deep dives on my startups - I write about it all.
            </p>
            <div class="mt-6 flex flex-col sm:flex-row lg:mt-0 lg:justify-end">
              <a
                href="/articles"
                class="flex w-full items-center justify-center rounded-md border border-transparent bg-indigo-600 px-4 py-2 text-base font-medium text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 sm:inline-flex sm:w-auto"
              >
                Read more
              </a>
            </div>
          </div>
        </div>
        <div
          class="mt-6 grid gap-16 pt-10 lg:grid-cols-2 lg:gap-x-5 lg:gap-y-12"
        >
          {
            sortedArticles.slice(0, 6).map((article) => (
              <div>
                <p class="text-sm text-gray-500">
                  <time datetime="2020-03-16">
                    {dayjs(article.frontmatter.date).format("MMM D, YYYY")}
                  </time>
                </p>
                <a href={article.url} class="mt-2 block">
                  <p class="text-xl font-semibold text-gray-900">
                    {article.frontmatter.title}
                  </p>
                  <p class="mt-3 text-base text-gray-500">
                    {article.frontmatter.description}
                  </p>
                </a>
                <div class="mt-3">
                  <a
                    href={article.url}
                    class="text-base font-semibold text-indigo-600 hover:text-indigo-500"
                  >
                    Read full story
                  </a>
                </div>
              </div>
            ))
          }
        </div>
      </div>
    </div>

    <!-- Section: Talks -->
    <div
      id="talks"
      class="relative bg-gray-50 px-4 pt-16 pb-20 sm:px-6 lg:px-8 lg:pt-24 lg:pb-28"
    >
      <div class="absolute inset-0">
        <div class="h-1/3 bg-white sm:h-2/3"></div>
      </div>
      <div class="relative mx-auto max-w-7xl">
        <div class="text-center">
          <h2
            class="text-3xl font-bold tracking-tight text-gray-900 sm:text-4xl"
          >
            Talks
          </h2>
          <p class="mx-auto mt-3 max-w-2xl text-xl text-gray-500 sm:mt-4">
            I love sharing my journey. I've been fortunate enough to build
            startups, social impact projects and work with government and the
            private sector on every level.
          </p>
        </div>
        <div
          class="mx-auto mt-12 grid md:grid-cols-2 gap-5 lg:max-w-none lg:grid-cols-3"
        >
          {
            talks.map((talk) => (
              <div class="flex flex-col overflow-hidden rounded-lg shadow-lg">
                <div class="flex-shrink-0">
                  <Image
                    class="h-64 w-full object-cover"
                    src={talk.imageUrl}
                    alt={talk.title}
                  />
                </div>
                <div class="flex flex-1 flex-col justify-between bg-white p-6">
                  <div class="flex-1">
                    <p class="text-sm font-medium text-indigo-600">
                      {talk.category}
                    </p>
                    <a
                      href={talk.link}
                      class="mt-2 block"
                      target="_blank"
                      rel="noopener noreferrer"
                    >
                      <p class="text-xl font-semibold text-gray-900">
                        {talk.title}
                      </p>
                      <p class="mt-3 text-base text-gray-500">
                        {talk.description}
                      </p>
                    </a>
                  </div>
                  <div class="mt-6 flex items-center gap-6">
                    <p class="text-sm font-medium">
                      {dayjs(talk.date).format("MMM DD, YYYY")}
                    </p>
                    {talk.slidesUrl && (
                      <p class="text-sm font-medium text-indigo-600">
                        <a href={talk.slidesUrl} class="hover:underline">
                          Download Slides
                        </a>
                      </p>
                    )}
                  </div>
                </div>
              </div>
            ))
          }
        </div>
      </div>
    </div>

    <!-- TODO Section: Mentorship -->
  </main>
</BaseLayout>
